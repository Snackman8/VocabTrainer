<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Vocab Trainer</title>
    <link href="/vocabTrainer.css" rel="stylesheet">

    <!-- jquery -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.1/dist/jquery.min.js"></script>
    <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        function key(ele) {
            // if not ctrl or alt, process as normal
            if (!event.ctrlKey && !event.altKey && (event.key != 'Enter')) return false;

            // prevent default action
            event.preventDefault();

            // special for enter
            if (event.key == 'Enter') return call_py('check_answer')

            // accents
            if (event.ctrlKey && (event.key == 'a')) { $('#answer').val($('#answer').val() + 'á'); }
            if (event.ctrlKey && (event.key == 'e')) { $('#answer').val($('#answer').val() + 'é'); }
            if (event.ctrlKey && (event.key == 'i')) { $('#answer').val($('#answer').val() + 'í'); }
            if (event.ctrlKey && (event.key == 'o')) { $('#answer').val($('#answer').val() + 'ó'); }
            if (event.ctrlKey && (event.key == 'u')) { $('#answer').val($('#answer').val() + 'ú'); }
            if (event.altKey  && (event.key == 'n')) { $('#answer').val($('#answer').val() + 'ñ'); }
            if (event.altKey  && (event.key == 'u')) { $('#answer').val($('#answer').val() + 'ü'); }
          }
    </script>
</head>

<body class="d-flex flex-column min-vh-100">
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand ps-3" href="#">Vocab Trainer</a>

        <a id=login_button href='login' class='navbar-nav ms-auto me-3 p-1 btn btn-outline-secondary'>Login</a>

        <div class="dropdown navbar-nav ms-auto me-3 p-1" style="display: none; min-width:200px;" id="userdropdown" >
          <button class="btn btn-secondary dropdown-toggle col-12" type="button" data-bs-toggle="dropdown">
            <svg width="24" height="24" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16" style="margin-right: 12px">
                <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
            </svg>
            <span></span>
          </button>
          <div class="dropdown-menu">
            <a class="dropdown-item" onclick="call_py('btn_clicked_change_display_name', 'change_display_name');">Change Display Name</a>
            <a class="dropdown-item" href="logout">Logout</a>
          </div>
        </div>

    </nav>
    <!-- thin divider -->
    <div class="border border-5 border-secondary"></div>

    <!-- main container -->
    <div class="container">
        <!-- loading screen -->
        <div class="ui_pane card offset-md-3 col-md-6 mt-3" id="pane_loading">
            <h5 class="d-inline-block pe-5">Loading...</h5>
            <div class="spinner-border text-primary">
                <span class="sr-only"></span>
            </div>
        </div>

        <!-- select quiz -->
        <div class="ui_pane card col-md-6 offset-md-3 mt-3" id="pane_quizzes_available">
            <!-- header and title -->
            <h5 class="card-header text-bg-success p-3">Choose Quiz</h5>
            <h4 class="card-title text-center mt-3">Quizzes Available</h4>
            <!-- select -->
            <div class="row col-md-10 mx-auto my-3">
                <select id='select_quizzes_available' size=10 class="form-select"></select>
            </div>
            <!-- buttons -->
            <div class='row mt-3 mb-0'>
                <button class='btn btn-success col-md-4 offset-md-4 my-2' onclick="call_py('btn_clicked', 'start_selected_quiz');">Start Selected Quiz</button>
            </div>
            <div class='row mt-3 mb-4'>
                <button class='btn btn-secondary col-md-4 offset-md-1 my-2' onclick="call_py('btn_clicked', 'start_mini_quiz_10');">Start Mini Quiz<br>(10 Questions)</button>
                <button class='btn btn-secondary col-md-4 offset-md-2 my-2' onclick="call_py('btn_clicked', 'start_mini_quiz_20');">Start Mini Quiz<br>(20 Questions)</button>
            </div>
            <div class='row mt-3 mb-4'>
                <button class='btn btn-primary col-md-2 offset-md-2' onclick="call_py('btn_clicked', 'create_new_quiz');">New Quiz</button>
                <button class='btn btn-warning col-md-2 offset-md-1' onclick="call_py('btn_clicked', 'edit_selected_quiz');">Edit Quiz</button>
                <button class='btn btn-danger  col-md-2 offset-md-1' onclick="call_py('btn_clicked', 'delete_selected_quiz');">Delete Quiz</button>
            </div>
        </div>

        <!-- edit quiz -->
        <div class="ui_pane card col-md-6 offset-md-3 mt-3" id="pane_editing_quiz">
            <!-- header and title -->
            <h5 class="card-header text-bg-warning p-3">Editing Quiz</h5>
            <h5 class="card-title mt-1 p-3">Enter quiz data below<br>One question and answer per line, seperated by a pipe (|)<br>i.e. if the question is "2+2" and the answer is "4" then the line should read  2+2|4</h5>
            <!-- text area -->
            <div class="row col-md-10 mx-auto mt-1">
                 <textarea class="form-control" id="quiz_textarea" rows="15"></textarea>
            </div>
            <!-- buttons -->
            <div class='row mt-3 mb-4'>
                <button class='btn btn-secondary col-md-2 offset-md-3' onclick="call_py('btn_clicked', 'edit_selected_quiz_cancelled');">Cancel</button>
                <button class='btn btn-primary   col-md-2 offset-md-2' onclick="event.cancelBubble = true; call_py('btn_clicked', 'edit_selected_quiz_save');">Save</button>
            </div>
        </div>

        <!-- taking quiz -->
        <div class="ui_pane card col-md-8 offset-md-2 mt-3" id="pane_taking_quiz">
            <!-- header and title -->
            <h5 class="card-header text-bg-success p-3">Taking Quiz</h5>
            <!-- question and answer -->
            <div class="row border rounded m-5 mb-0 p-3 pb-0">
                <div class="col-md-4"><img class="img-fluid p-1" src="burrito.png"></div>
                <div class="col-md-8 pt-3">
                    <div id='QuestionAndAnswer'>
                        <h3>Question</h3>
                        <div class="ms-2 fs-3 text-secondary" id=question>Question goes here</div>
                        <h3 class="mt-5">Answer</h3>
                        <input class="form-control ms-2" id="answer" placeholder="Type Answer Here" onkeydown="key(this)" style="font-size: 32px;">
                    </div>
                    <div id='QuestionsFinished' style="display:none">
                        <h5 class="mt-4 mb-4 text-center" id=Finished_Stats>Finished Stats</h5>
                        <center><button class='btn btn-primary' onclick="call_py('btn_clicked', 'quiz_finished');">OK</button></center>
                    </div>
                </div>
                <!-- Alert -->
                <h5 class="col-md-8 offset-md-2 alert alert-danger text-center mt-3" id=alert style="visibility:hidden">Alert</h5>
            </div>
            <!-- progress bar -->
            <div class="row col-md-10 offset-md-1" >
                <div class="text-center mt-5" id=progress_text>Progress Message</div>
                <div class="progress m-3" style="height:30px;">
                    <div id="pbar_correct"   class="progress-bar bg-success progress-bar-striped progress-bar-animated" style="width: 10%">1</div>
                    <div id="pbar_remaining" class="progress-bar            progress-bar-striped progress-bar-animated" style="width: 10%">2</div>
                    <div id="pbar_remedial"  class="progress-bar bg-danger  progress-bar-striped progress-bar-animated" style="width: 10%">3</div>
                </div>
            </div>
        </div>
    </div>

    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasUpdateDisplayName">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasExampleLabel">Update Display Name</h5>
        </div>
        <div class="offcanvas-body">
            <label class="form-label">Display Name</label>
            <input class="form-control mb-5" placeholder='New Display Name' id="new_display_name">
            <button class="btn btn-primary col-4 offset-2 m-2">OK</button>
            <button class="btn btn-secondary col-4 m-2" data-bs-dismiss="offcanvas">Cancel</button>
        </div>
    </div>

    <footer class="mt-auto">
        <div class="pull-right me-5 bg-light">
            <div class="float-end">
                <a href="https://www.freepik.com/free-vector/mascot-images-burrito-set_15757809.htm#query=burrito&position=1&from_view=search">Image by DrawingMyDiary</a> on Freepik
            </div><br>
        </div>
    </footer>
</body>
</html>
